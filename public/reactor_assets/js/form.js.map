{"version":3,"sources":["minicolors.js","password.js","upload.js","slug.js","fields.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7gCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.js","sourcesContent":["/*\n * jQuery MiniColors: A tiny color picker built on jQuery\n *\n * Copyright: Cory LaViska for A Beautiful Site, LLC: http://www.abeautifulsite.net/\n *\n * Contribute: https://github.com/claviska/jquery-minicolors\n *\n * @license: http://opensource.org/licenses/MIT\n *\n */\n(function (factory) {\n    /* jshint ignore:start */\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n    /* jshint ignore:end */\n}(function ($) {\n\n    // Defaults\n    $.minicolors = {\n        defaults: {\n            animationSpeed: 50,\n            animationEasing: 'swing',\n            change: null,\n            changeDelay: 0,\n            control: 'hue',\n            dataUris: true,\n            defaultValue: '',\n            format: 'hex',\n            hide: null,\n            hideSpeed: 100,\n            inline: false,\n            keywords: '',\n            letterCase: 'lowercase',\n            opacity: false,\n            position: 'bottom left',\n            show: null,\n            showSpeed: 100,\n            theme: 'default'\n        }\n    };\n\n    // Public methods\n    $.extend($.fn, {\n        minicolors: function(method, data) {\n\n            switch(method) {\n\n                // Destroy the control\n                case 'destroy':\n                    $(this).each( function() {\n                        destroy($(this));\n                    });\n                    return $(this);\n\n                // Hide the color picker\n                case 'hide':\n                    hide();\n                    return $(this);\n\n                // Get/set opacity\n                case 'opacity':\n                    // Getter\n                    if( data === undefined ) {\n                        // Getter\n                        return $(this).attr('data-opacity');\n                    } else {\n                        // Setter\n                        $(this).each( function() {\n                            updateFromInput($(this).attr('data-opacity', data));\n                        });\n                    }\n                    return $(this);\n\n                // Get an RGB(A) object based on the current color/opacity\n                case 'rgbObject':\n                    return rgbObject($(this), method === 'rgbaObject');\n\n                // Get an RGB(A) string based on the current color/opacity\n                case 'rgbString':\n                case 'rgbaString':\n                    return rgbString($(this), method === 'rgbaString');\n\n                // Get/set settings on the fly\n                case 'settings':\n                    if( data === undefined ) {\n                        return $(this).data('minicolors-settings');\n                    } else {\n                        // Setter\n                        $(this).each( function() {\n                            var settings = $(this).data('minicolors-settings') || {};\n                            destroy($(this));\n                            $(this).minicolors($.extend(true, settings, data));\n                        });\n                    }\n                    return $(this);\n\n                // Show the color picker\n                case 'show':\n                    show( $(this).eq(0) );\n                    return $(this);\n\n                // Get/set the hex color value\n                case 'value':\n                    if( data === undefined ) {\n                        // Getter\n                        return $(this).val();\n                    } else {\n                        // Setter\n                        $(this).each( function() {\n                            if( typeof(data) === 'object' ) {\n                                if( data.opacity ) {\n                                    $(this).attr('data-opacity', keepWithin(data.opacity, 0, 1));\n                                }\n                                if( data.color ) {\n                                    $(this).val(data.color);\n                                }\n                            } else {\n                                $(this).val(data);\n                            }\n                            updateFromInput($(this));\n                        });\n                    }\n                    return $(this);\n\n                // Initializes the control\n                default:\n                    if( method !== 'create' ) data = method;\n                    $(this).each( function() {\n                        init($(this), data);\n                    });\n                    return $(this);\n\n            }\n\n        }\n    });\n\n    // Initialize input elements\n    function init(input, settings) {\n\n        var minicolors = $('<div class=\"minicolors\" />'),\n            defaults = $.minicolors.defaults,\n            format = input.attr('data-format'),\n            keywords = input.attr('data-keywords'),\n            opacity = input.attr('data-opacity');\n\n        // Do nothing if already initialized\n        if( input.data('minicolors-initialized') ) return;\n\n        // Handle settings\n        settings = $.extend(true, {}, defaults, settings);\n\n        // The wrapper\n        minicolors\n            .addClass('minicolors-theme-' + settings.theme)\n            .toggleClass('minicolors-with-opacity', settings.opacity)\n            .toggleClass('minicolors-no-data-uris', settings.dataUris !== true);\n\n        // Custom positioning\n        if( settings.position !== undefined ) {\n            $.each(settings.position.split(' '), function() {\n                minicolors.addClass('minicolors-position-' + this);\n            });\n        }\n\n        // Input size\n        if( format === 'rgb' ) {\n            $input_size = opacity ? '25' : '20';\n        } else {\n            $input_size = keywords ? '11' : '7';\n        }\n\n        // The input\n        input\n            .addClass('minicolors-input')\n            .data('minicolors-initialized', false)\n            .data('minicolors-settings', settings)\n            .prop('size', $input_size)\n            .wrap(minicolors)\n            .after(\n                '<div class=\"minicolors-panel minicolors-slider-' + settings.control + '\">' +\n                    '<div class=\"minicolors-slider minicolors-sprite\">' +\n                        '<div class=\"minicolors-picker\"></div>' +\n                    '</div>' +\n                    '<div class=\"minicolors-opacity-slider minicolors-sprite\">' +\n                        '<div class=\"minicolors-picker\"></div>' +\n                    '</div>' +\n                    '<div class=\"minicolors-grid minicolors-sprite\">' +\n                        '<div class=\"minicolors-grid-inner\"></div>' +\n                        '<div class=\"minicolors-picker\"><div></div></div>' +\n                    '</div>' +\n                '</div>'\n            );\n\n        // The swatch\n        if( !settings.inline ) {\n            input.after('<span class=\"minicolors-swatch minicolors-sprite\"><span class=\"minicolors-swatch-color\"></span></span>');\n            input.next('.minicolors-swatch').on('click', function(event) {\n                event.preventDefault();\n                input.focus();\n            });\n        }\n\n        // Prevent text selection in IE\n        input.parent().find('.minicolors-panel').on('selectstart', function() { return false; }).end();\n\n        // Inline controls\n        if( settings.inline ) input.parent().addClass('minicolors-inline');\n\n        updateFromInput(input, false);\n\n        input.data('minicolors-initialized', true);\n\n    }\n\n    // Returns the input back to its original state\n    function destroy(input) {\n\n        var minicolors = input.parent();\n\n        // Revert the input element\n        input\n            .removeData('minicolors-initialized')\n            .removeData('minicolors-settings')\n            .removeProp('size')\n            .removeClass('minicolors-input');\n\n        // Remove the wrap and destroy whatever remains\n        minicolors.before(input).remove();\n\n    }\n\n    // Shows the specified dropdown panel\n    function show(input) {\n\n        var minicolors = input.parent(),\n            panel = minicolors.find('.minicolors-panel'),\n            settings = input.data('minicolors-settings');\n\n        // Do nothing if uninitialized, disabled, inline, or already open\n        if( !input.data('minicolors-initialized') ||\n            input.prop('disabled') ||\n            minicolors.hasClass('minicolors-inline') ||\n            minicolors.hasClass('minicolors-focus')\n        ) return;\n\n        hide();\n\n        minicolors.addClass('minicolors-focus');\n        panel\n            .stop(true, true)\n            .fadeIn(settings.showSpeed, function() {\n                if( settings.show ) settings.show.call(input.get(0));\n            });\n\n    }\n\n    // Hides all dropdown panels\n    function hide() {\n\n        $('.minicolors-focus').each( function() {\n\n            var minicolors = $(this),\n                input = minicolors.find('.minicolors-input'),\n                panel = minicolors.find('.minicolors-panel'),\n                settings = input.data('minicolors-settings');\n\n            panel.fadeOut(settings.hideSpeed, function() {\n                if( settings.hide ) settings.hide.call(input.get(0));\n                minicolors.removeClass('minicolors-focus');\n            });\n\n        });\n    }\n\n    // Moves the selected picker\n    function move(target, event, animate) {\n\n        var input = target.parents('.minicolors').find('.minicolors-input'),\n            settings = input.data('minicolors-settings'),\n            picker = target.find('[class$=-picker]'),\n            offsetX = target.offset().left,\n            offsetY = target.offset().top,\n            x = Math.round(event.pageX - offsetX),\n            y = Math.round(event.pageY - offsetY),\n            duration = animate ? settings.animationSpeed : 0,\n            wx, wy, r, phi;\n\n        // Touch support\n        if( event.originalEvent.changedTouches ) {\n            x = event.originalEvent.changedTouches[0].pageX - offsetX;\n            y = event.originalEvent.changedTouches[0].pageY - offsetY;\n        }\n\n        // Constrain picker to its container\n        if( x < 0 ) x = 0;\n        if( y < 0 ) y = 0;\n        if( x > target.width() ) x = target.width();\n        if( y > target.height() ) y = target.height();\n\n        // Constrain color wheel values to the wheel\n        if( target.parent().is('.minicolors-slider-wheel') && picker.parent().is('.minicolors-grid') ) {\n            wx = 75 - x;\n            wy = 75 - y;\n            r = Math.sqrt(wx * wx + wy * wy);\n            phi = Math.atan2(wy, wx);\n            if( phi < 0 ) phi += Math.PI * 2;\n            if( r > 75 ) {\n                r = 75;\n                x = 75 - (75 * Math.cos(phi));\n                y = 75 - (75 * Math.sin(phi));\n            }\n            x = Math.round(x);\n            y = Math.round(y);\n        }\n\n        // Move the picker\n        if( target.is('.minicolors-grid') ) {\n            picker\n                .stop(true)\n                .animate({\n                    top: y + 'px',\n                    left: x + 'px'\n                }, duration, settings.animationEasing, function() {\n                    updateFromControl(input, target);\n                });\n        } else {\n            picker\n                .stop(true)\n                .animate({\n                    top: y + 'px'\n                }, duration, settings.animationEasing, function() {\n                    updateFromControl(input, target);\n                });\n        }\n\n    }\n\n    // Sets the input based on the color picker values\n    function updateFromControl(input, target) {\n\n        function getCoords(picker, container) {\n\n            var left, top;\n            if( !picker.length || !container ) return null;\n            left = picker.offset().left;\n            top = picker.offset().top;\n\n            return {\n                x: left - container.offset().left + (picker.outerWidth() / 2),\n                y: top - container.offset().top + (picker.outerHeight() / 2)\n            };\n\n        }\n\n        var hue, saturation, brightness, x, y, r, phi,\n\n            hex = input.val(),\n            format = input.attr('data-format'),\n            keywords = input.attr('data-keywords'),\n            opacity = input.attr('data-opacity'),\n\n            // Helpful references\n            minicolors = input.parent(),\n            settings = input.data('minicolors-settings'),\n            swatch = minicolors.find('.minicolors-swatch'),\n\n            // Panel objects\n            grid = minicolors.find('.minicolors-grid'),\n            slider = minicolors.find('.minicolors-slider'),\n            opacitySlider = minicolors.find('.minicolors-opacity-slider'),\n\n            // Picker objects\n            gridPicker = grid.find('[class$=-picker]'),\n            sliderPicker = slider.find('[class$=-picker]'),\n            opacityPicker = opacitySlider.find('[class$=-picker]'),\n\n            // Picker positions\n            gridPos = getCoords(gridPicker, grid),\n            sliderPos = getCoords(sliderPicker, slider),\n            opacityPos = getCoords(opacityPicker, opacitySlider);\n\n        // Handle colors\n        if( target.is('.minicolors-grid, .minicolors-slider, .minicolors-opacity-slider') ) {\n\n            // Determine HSB values\n            switch(settings.control) {\n\n                case 'wheel':\n                    // Calculate hue, saturation, and brightness\n                    x = (grid.width() / 2) - gridPos.x;\n                    y = (grid.height() / 2) - gridPos.y;\n                    r = Math.sqrt(x * x + y * y);\n                    phi = Math.atan2(y, x);\n                    if( phi < 0 ) phi += Math.PI * 2;\n                    if( r > 75 ) {\n                        r = 75;\n                        gridPos.x = 69 - (75 * Math.cos(phi));\n                        gridPos.y = 69 - (75 * Math.sin(phi));\n                    }\n                    saturation = keepWithin(r / 0.75, 0, 100);\n                    hue = keepWithin(phi * 180 / Math.PI, 0, 360);\n                    brightness = keepWithin(100 - Math.floor(sliderPos.y * (100 / slider.height())), 0, 100);\n                    hex = hsb2hex({\n                        h: hue,\n                        s: saturation,\n                        b: brightness\n                    });\n\n                    // Update UI\n                    slider.css('backgroundColor', hsb2hex({ h: hue, s: saturation, b: 100 }));\n                    break;\n\n                case 'saturation':\n                    // Calculate hue, saturation, and brightness\n                    hue = keepWithin(parseInt(gridPos.x * (360 / grid.width()), 10), 0, 360);\n                    saturation = keepWithin(100 - Math.floor(sliderPos.y * (100 / slider.height())), 0, 100);\n                    brightness = keepWithin(100 - Math.floor(gridPos.y * (100 / grid.height())), 0, 100);\n                    hex = hsb2hex({\n                        h: hue,\n                        s: saturation,\n                        b: brightness\n                    });\n\n                    // Update UI\n                    slider.css('backgroundColor', hsb2hex({ h: hue, s: 100, b: brightness }));\n                    minicolors.find('.minicolors-grid-inner').css('opacity', saturation / 100);\n                    break;\n\n                case 'brightness':\n                    // Calculate hue, saturation, and brightness\n                    hue = keepWithin(parseInt(gridPos.x * (360 / grid.width()), 10), 0, 360);\n                    saturation = keepWithin(100 - Math.floor(gridPos.y * (100 / grid.height())), 0, 100);\n                    brightness = keepWithin(100 - Math.floor(sliderPos.y * (100 / slider.height())), 0, 100);\n                    hex = hsb2hex({\n                        h: hue,\n                        s: saturation,\n                        b: brightness\n                    });\n\n                    // Update UI\n                    slider.css('backgroundColor', hsb2hex({ h: hue, s: saturation, b: 100 }));\n                    minicolors.find('.minicolors-grid-inner').css('opacity', 1 - (brightness / 100));\n                    break;\n\n                default:\n                    // Calculate hue, saturation, and brightness\n                    hue = keepWithin(360 - parseInt(sliderPos.y * (360 / slider.height()), 10), 0, 360);\n                    saturation = keepWithin(Math.floor(gridPos.x * (100 / grid.width())), 0, 100);\n                    brightness = keepWithin(100 - Math.floor(gridPos.y * (100 / grid.height())), 0, 100);\n                    hex = hsb2hex({\n                        h: hue,\n                        s: saturation,\n                        b: brightness\n                    });\n\n                    // Update UI\n                    grid.css('backgroundColor', hsb2hex({ h: hue, s: 100, b: 100 }));\n                    break;\n\n            }\n\n            // Handle opacity\n            if( settings.opacity ) {\n                opacity = parseFloat(1 - (opacityPos.y / opacitySlider.height())).toFixed(2);\n            } else {\n                opacity = 1;\n            }\n            if( settings.opacity ) input.attr('data-opacity', opacity);\n\n            // Set color string\n            if( format === 'rgb' ) {\n                // Returns RGB(A) string\n                var rgb = hex2rgb(hex),\n                    opacity = input.attr('data-opacity') === '' ? 1 : keepWithin( parseFloat( input.attr('data-opacity') ).toFixed(2), 0, 1 );\n                if( isNaN( opacity ) || !settings.opacity ) opacity = 1;\n\n                if( input.minicolors('rgbObject').a <= 1 && rgb && settings.opacity) {\n                    // Set RGBA string if alpha\n                    value = 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + parseFloat( opacity ) + ')';\n                } else {\n                    // Set RGB string (alpha = 1)\n                    value = 'rgb(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ')';\n                }\n            } else {\n                // Returns hex color\n                value = convertCase( hex, settings.letterCase );\n            }\n\n            // Update value from picker\n            input.val( value );\n        }\n\n        // Set swatch color\n        swatch.find('span').css({\n            backgroundColor: hex,\n            opacity: opacity\n        });\n\n        // Handle change event\n        doChange(input, value, opacity);\n\n    }\n\n    // Sets the color picker values from the input\n    function updateFromInput(input, preserveInputValue) {\n\n        var hex,\n            hsb,\n            format = input.attr('data-format'),\n            keywords = input.attr('data-keywords'),\n            opacity,\n            x, y, r, phi,\n\n            // Helpful references\n            minicolors = input.parent(),\n            settings = input.data('minicolors-settings'),\n            swatch = minicolors.find('.minicolors-swatch'),\n\n            // Panel objects\n            grid = minicolors.find('.minicolors-grid'),\n            slider = minicolors.find('.minicolors-slider'),\n            opacitySlider = minicolors.find('.minicolors-opacity-slider'),\n\n            // Picker objects\n            gridPicker = grid.find('[class$=-picker]'),\n            sliderPicker = slider.find('[class$=-picker]'),\n            opacityPicker = opacitySlider.find('[class$=-picker]');\n\n        // Determine hex/HSB values\n        if( isRgb(input.val()) ) {\n            // If input value is a rgb(a) string, convert it to hex color and update opacity\n            hex = rgbString2hex(input.val());\n            alpha = keepWithin(parseFloat(getAlpha(input.val())).toFixed(2), 0, 1);\n            if( alpha ) {\n                input.attr('data-opacity', alpha);\n            }\n        } else {\n            hex = convertCase(parseHex(input.val(), true), settings.letterCase);\n        }\n\n        if( !hex ){\n            hex = convertCase(parseInput(settings.defaultValue, true), settings.letterCase);\n        }\n        hsb = hex2hsb(hex);\n\n        // Get array of lowercase keywords\n        keywords = !keywords ? [] : $.map(keywords.split(','), function(a) {\n            return $.trim(a.toLowerCase());\n        });\n\n        // Set color string\n        if( input.val() !== '' && $.inArray(input.val().toLowerCase(), keywords) > -1 ) {\n            value = convertCase(input.val());\n        } else {\n            value = isRgb(input.val()) ? parseRgb(input.val()) : hex;\n        }\n\n        // Update input value\n        if( !preserveInputValue ) input.val(value);\n\n        // Determine opacity value\n        if( settings.opacity ) {\n            // Get from data-opacity attribute and keep within 0-1 range\n            opacity = input.attr('data-opacity') === '' ? 1 : keepWithin(parseFloat(input.attr('data-opacity')).toFixed(2), 0, 1);\n            if( isNaN(opacity) ) opacity = 1;\n            input.attr('data-opacity', opacity);\n            swatch.find('span').css('opacity', opacity);\n\n            // Set opacity picker position\n            y = keepWithin(opacitySlider.height() - (opacitySlider.height() * opacity), 0, opacitySlider.height());\n            opacityPicker.css('top', y + 'px');\n        }\n\n        // Set opacity to zero if input value is transparent\n        if( input.val().toLowerCase() === 'transparent' ) {\n            swatch.find('span').css('opacity', 0);\n        }\n\n        // Update swatch\n        swatch.find('span').css('backgroundColor', hex);\n\n        // Determine picker locations\n        switch(settings.control) {\n\n            case 'wheel':\n                // Set grid position\n                r = keepWithin(Math.ceil(hsb.s * 0.75), 0, grid.height() / 2);\n                phi = hsb.h * Math.PI / 180;\n                x = keepWithin(75 - Math.cos(phi) * r, 0, grid.width());\n                y = keepWithin(75 - Math.sin(phi) * r, 0, grid.height());\n                gridPicker.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n\n                // Set slider position\n                y = 150 - (hsb.b / (100 / grid.height()));\n                if( hex === '' ) y = 0;\n                sliderPicker.css('top', y + 'px');\n\n                // Update panel color\n                slider.css('backgroundColor', hsb2hex({ h: hsb.h, s: hsb.s, b: 100 }));\n                break;\n\n            case 'saturation':\n                // Set grid position\n                x = keepWithin((5 * hsb.h) / 12, 0, 150);\n                y = keepWithin(grid.height() - Math.ceil(hsb.b / (100 / grid.height())), 0, grid.height());\n                gridPicker.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n\n                // Set slider position\n                y = keepWithin(slider.height() - (hsb.s * (slider.height() / 100)), 0, slider.height());\n                sliderPicker.css('top', y + 'px');\n\n                // Update UI\n                slider.css('backgroundColor', hsb2hex({ h: hsb.h, s: 100, b: hsb.b }));\n                minicolors.find('.minicolors-grid-inner').css('opacity', hsb.s / 100);\n                break;\n\n            case 'brightness':\n                // Set grid position\n                x = keepWithin((5 * hsb.h) / 12, 0, 150);\n                y = keepWithin(grid.height() - Math.ceil(hsb.s / (100 / grid.height())), 0, grid.height());\n                gridPicker.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n\n                // Set slider position\n                y = keepWithin(slider.height() - (hsb.b * (slider.height() / 100)), 0, slider.height());\n                sliderPicker.css('top', y + 'px');\n\n                // Update UI\n                slider.css('backgroundColor', hsb2hex({ h: hsb.h, s: hsb.s, b: 100 }));\n                minicolors.find('.minicolors-grid-inner').css('opacity', 1 - (hsb.b / 100));\n                break;\n\n            default:\n                // Set grid position\n                x = keepWithin(Math.ceil(hsb.s / (100 / grid.width())), 0, grid.width());\n                y = keepWithin(grid.height() - Math.ceil(hsb.b / (100 / grid.height())), 0, grid.height());\n                gridPicker.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n\n                // Set slider position\n                y = keepWithin(slider.height() - (hsb.h / (360 / slider.height())), 0, slider.height());\n                sliderPicker.css('top', y + 'px');\n\n                // Update panel color\n                grid.css('backgroundColor', hsb2hex({ h: hsb.h, s: 100, b: 100 }));\n                break;\n\n        }\n\n        // Fire change event, but only if minicolors is fully initialized\n        if( input.data('minicolors-initialized') ) {\n            doChange(input, value, opacity);\n        }\n\n    }\n\n    // Runs the change and changeDelay callbacks\n    function doChange(input, value, opacity) {\n\n        var settings = input.data('minicolors-settings'),\n            lastChange = input.data('minicolors-lastChange');\n\n        // Only run if it actually changed\n        if( !lastChange || lastChange.value !== value || lastChange.opacity !== opacity ) {\n\n            // Remember last-changed value\n            input.data('minicolors-lastChange', {\n                value: value,\n                opacity: opacity\n            });\n\n            // Fire change event\n            if( settings.change ) {\n                if( settings.changeDelay ) {\n                    // Call after a delay\n                    clearTimeout(input.data('minicolors-changeTimeout'));\n                    input.data('minicolors-changeTimeout', setTimeout( function() {\n                        settings.change.call(input.get(0), value, opacity);\n                    }, settings.changeDelay));\n                } else {\n                    // Call immediately\n                    settings.change.call(input.get(0), value, opacity);\n                }\n            }\n            input.trigger('change').trigger('input');\n        }\n\n    }\n\n    // Generates an RGB(A) object based on the input's value\n    function rgbObject(input) {\n        var hex = parseHex($(input).val(), true),\n            rgb = hex2rgb(hex),\n            opacity = $(input).attr('data-opacity');\n        if( !rgb ) return null;\n        if( opacity !== undefined ) $.extend(rgb, { a: parseFloat(opacity) });\n        return rgb;\n    }\n\n    // Generates an RGB(A) string based on the input's value\n    function rgbString(input, alpha) {\n        var hex = parseHex($(input).val(), true),\n            rgb = hex2rgb(hex),\n            opacity = $(input).attr('data-opacity');\n        if( !rgb ) return null;\n        if( opacity === undefined ) opacity = 1;\n        if( alpha ) {\n            return 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + parseFloat(opacity) + ')';\n        } else {\n            return 'rgb(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ')';\n        }\n    }\n\n    // Converts to the letter case specified in settings\n    function convertCase(string, letterCase) {\n        return letterCase === 'uppercase' ? string.toUpperCase() : string.toLowerCase();\n    }\n\n    // Parses a string and returns a valid hex string when possible\n    function parseHex(string, expand) {\n        string = string.replace(/^#/g, '');\n        if( !string.match(/^[A-F0-9]{3,6}/ig) ) return '';\n        if( string.length !== 3 && string.length !== 6 ) return '';\n        if( string.length === 3 && expand ) {\n            string = string[0] + string[0] + string[1] + string[1] + string[2] + string[2];\n        }\n        return '#' + string;\n    }\n\n    // Parses a string and returns a valid RGB(A) string when possible\n    function parseRgb(string, obj) {\n\n        var values = string.replace(/[^\\d,.]/g, ''),\n            rgba = values.split(','),\n            output;\n\n        rgba[0] = keepWithin(parseInt(rgba[0], 10), 0, 255);\n        rgba[1] = keepWithin(parseInt(rgba[1], 10), 0, 255);\n        rgba[2] = keepWithin(parseInt(rgba[2], 10), 0, 255);\n        if( rgba[3] ) {\n            rgba[3] = keepWithin(parseFloat(rgba[3], 10), 0, 1);\n        }\n\n        // Return RGBA object\n        if( obj ) {\n            return {\n                r: rgba[0],\n                g: rgba[1],\n                b: rgba[2],\n                a: rgba[3] ? rgba[3] : null\n            };\n        }\n\n        // Return RGBA string\n        if( typeof(rgba[3]) !== 'undefined' && rgba[3] <= 1 ) {\n            return 'rgba(' + rgba[0] + ', ' + rgba[1] + ', ' + rgba[2] + ', ' + rgba[3] + ')';\n        } else {\n            return 'rgb(' + rgba[0] + ', ' + rgba[1] + ', ' + rgba[2] + ')';\n        }\n\n    }\n\n    // Parses a string and returns a valid color string when possible\n    function parseInput(string, expand) {\n        if( isRgb(string) ) {\n            // Returns a valid rgb(a) string\n            return parseRgb(string);\n        } else {\n            return parseHex(string, expand);\n        }\n    }\n\n    // Keeps value within min and max\n    function keepWithin(value, min, max) {\n        if( value < min ) value = min;\n        if( value > max ) value = max;\n        return value;\n    }\n\n    // Checks if a string is a valid RGB(A) string\n    function isRgb(string) {\n        rgb = string.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n        return (rgb && rgb.length === 4) ? true : false;\n    }\n\n    // Function to get alpha from a RGB(A) string\n    function getAlpha(rgba) {\n        rgba = rgba.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+(\\.\\d{1,2})?|\\.\\d{1,2})[\\s+]?/i);\n        return (rgba && rgba.length === 6) ? rgba[4] : '1';\n    }\n\n   // Converts an HSB object to an RGB object\n    function hsb2rgb(hsb) {\n        var rgb = {};\n        var h = Math.round(hsb.h);\n        var s = Math.round(hsb.s * 255 / 100);\n        var v = Math.round(hsb.b * 255 / 100);\n        if(s === 0) {\n            rgb.r = rgb.g = rgb.b = v;\n        } else {\n            var t1 = v;\n            var t2 = (255 - s) * v / 255;\n            var t3 = (t1 - t2) * (h % 60) / 60;\n            if( h === 360 ) h = 0;\n            if( h < 60 ) { rgb.r = t1; rgb.b = t2; rgb.g = t2 + t3; }\n            else if( h < 120 ) {rgb.g = t1; rgb.b = t2; rgb.r = t1 - t3; }\n            else if( h < 180 ) {rgb.g = t1; rgb.r = t2; rgb.b = t2 + t3; }\n            else if( h < 240 ) {rgb.b = t1; rgb.r = t2; rgb.g = t1 - t3; }\n            else if( h < 300 ) {rgb.b = t1; rgb.g = t2; rgb.r = t2 + t3; }\n            else if( h < 360 ) {rgb.r = t1; rgb.g = t2; rgb.b = t1 - t3; }\n            else { rgb.r = 0; rgb.g = 0; rgb.b = 0; }\n        }\n        return {\n            r: Math.round(rgb.r),\n            g: Math.round(rgb.g),\n            b: Math.round(rgb.b)\n        };\n    }\n\n    // Converts an RGB string to a hex string\n    function rgbString2hex(rgb){\n        rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n        return (rgb && rgb.length === 4) ? '#' +\n        ('0' + parseInt(rgb[1],10).toString(16)).slice(-2) +\n        ('0' + parseInt(rgb[2],10).toString(16)).slice(-2) +\n        ('0' + parseInt(rgb[3],10).toString(16)).slice(-2) : '';\n    }\n\n    // Converts an RGB object to a hex string\n    function rgb2hex(rgb) {\n        var hex = [\n            rgb.r.toString(16),\n            rgb.g.toString(16),\n            rgb.b.toString(16)\n        ];\n        $.each(hex, function(nr, val) {\n            if (val.length === 1) hex[nr] = '0' + val;\n        });\n        return '#' + hex.join('');\n    }\n\n    // Converts an HSB object to a hex string\n    function hsb2hex(hsb) {\n        return rgb2hex(hsb2rgb(hsb));\n    }\n\n    // Converts a hex string to an HSB object\n    function hex2hsb(hex) {\n        var hsb = rgb2hsb(hex2rgb(hex));\n        if( hsb.s === 0 ) hsb.h = 360;\n        return hsb;\n    }\n\n    // Converts an RGB object to an HSB object\n    function rgb2hsb(rgb) {\n        var hsb = { h: 0, s: 0, b: 0 };\n        var min = Math.min(rgb.r, rgb.g, rgb.b);\n        var max = Math.max(rgb.r, rgb.g, rgb.b);\n        var delta = max - min;\n        hsb.b = max;\n        hsb.s = max !== 0 ? 255 * delta / max : 0;\n        if( hsb.s !== 0 ) {\n            if( rgb.r === max ) {\n                hsb.h = (rgb.g - rgb.b) / delta;\n            } else if( rgb.g === max ) {\n                hsb.h = 2 + (rgb.b - rgb.r) / delta;\n            } else {\n                hsb.h = 4 + (rgb.r - rgb.g) / delta;\n            }\n        } else {\n            hsb.h = -1;\n        }\n        hsb.h *= 60;\n        if( hsb.h < 0 ) {\n            hsb.h += 360;\n        }\n        hsb.s *= 100/255;\n        hsb.b *= 100/255;\n        return hsb;\n    }\n\n    // Converts a hex string to an RGB object\n    function hex2rgb(hex) {\n        hex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\n        return {\n            /* jshint ignore:start */\n            r: hex >> 16,\n            g: (hex & 0x00FF00) >> 8,\n            b: (hex & 0x0000FF)\n            /* jshint ignore:end */\n        };\n    }\n\n    // Handle events\n    $(document)\n        // Hide on clicks outside of the control\n        .on('mousedown.minicolors touchstart.minicolors', function(event) {\n            if( !$(event.target).parents().add(event.target).hasClass('minicolors') ) {\n                hide();\n            }\n        })\n        // Start moving\n        .on('mousedown.minicolors touchstart.minicolors', '.minicolors-grid, .minicolors-slider, .minicolors-opacity-slider', function(event) {\n            var target = $(this);\n            event.preventDefault();\n            $(document).data('minicolors-target', target);\n            move(target, event, true);\n        })\n        // Move pickers\n        .on('mousemove.minicolors touchmove.minicolors', function(event) {\n            var target = $(document).data('minicolors-target');\n            if( target ) move(target, event);\n        })\n        // Stop moving\n        .on('mouseup.minicolors touchend.minicolors', function() {\n            $(this).removeData('minicolors-target');\n        })\n        // Show panel when swatch is clicked\n        .on('mousedown.minicolors touchstart.minicolors', '.minicolors-swatch', function(event) {\n            var input = $(this).parent().find('.minicolors-input');\n            event.preventDefault();\n            show(input);\n        })\n        // Show on focus\n        .on('focus.minicolors', '.minicolors-input', function() {\n            var input = $(this);\n            if( !input.data('minicolors-initialized') ) return;\n            show(input);\n        })\n        // Update value on blur\n        .on('blur.minicolors', '.minicolors-input', function() {\n            var input = $(this),\n                keywords = input.attr('data-keywords'),\n                settings = input.data('minicolors-settings'),\n                hex,\n                rgba,\n                swatchOpacity;\n\n            if( !input.data('minicolors-initialized') ) return;\n\n            // Get array of lowercase keywords\n            keywords = !keywords ? [] : $.map(keywords.split(','), function(a) {\n                return $.trim(a.toLowerCase());\n            });\n\n            // Set color string\n            if( input.val() !== '' && $.inArray(input.val().toLowerCase(), keywords) > -1 ) {\n                value = input.val();\n            } else {\n                // Get RGBA values for easy conversion\n                if( isRgb(input.val()) ) {\n                    rgba = parseRgb(input.val(), true);\n                } else {\n                    hex = parseHex(input.val(), true);\n                    rgba = hex ? hex2rgb(hex) : null;\n                }\n\n                // Convert to format\n                if( rgba === null ) {\n                    value = settings.defaultValue;\n                } else if( settings.format === 'rgb' ) {\n                    value = settings.opacity ?\n                        parseRgb('rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + input.attr('data-opacity') + ')') :\n                        parseRgb('rgb(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ')');\n                } else {\n                    value = rgb2hex(rgba);\n                }\n            }\n\n            // Update swatch opacity\n            swatchOpacity = settings.opacity ? input.attr('data-opacity') : 1;\n            if( value.toLowerCase() === 'transparent' ) swatchOpacity = 0;\n            input\n                .closest('.minicolors')\n                .find('.minicolors-swatch > span')\n                .css('opacity', swatchOpacity);\n\n            // Set input value\n            input.val(value);\n\n            // Is it blank?\n            if( input.val() === '' ) input.val(parseInput(settings.defaultValue, true));\n\n            // Adjust case\n            input.val( convertCase(input.val(), settings.letterCase) );\n\n        })\n        // Handle keypresses\n        .on('keydown.minicolors', '.minicolors-input', function(event) {\n            var input = $(this);\n            if( !input.data('minicolors-initialized') ) return;\n            switch(event.keyCode) {\n                case 9: // tab\n                    hide();\n                    break;\n                case 13: // enter\n                case 27: // esc\n                    hide();\n                    input.blur();\n                    break;\n            }\n        })\n        // Update on keyup\n        .on('keyup.minicolors', '.minicolors-input', function() {\n            var input = $(this);\n            if( !input.data('minicolors-initialized') ) return;\n            updateFromInput(input, true);\n        })\n        // Update on paste\n        .on('paste.minicolors', '.minicolors-input', function() {\n            var input = $(this);\n            if( !input.data('minicolors-initialized') ) return;\n            setTimeout( function() {\n                updateFromInput(input, true);\n            }, 1);\n        });\n\n}));\n",";( function(window) {\n    'use strict';\n\n    /**\n     * Meter constructor\n     *\n     * @param DOM Object el\n     * @param string field\n     */\n    function Meter(el, field, meter) {\n        this.el = el;\n\n        field = field || 'input[type=\"password\"]';\n        meter = meter || '.strength-meter > div';\n\n        this.field = this.el.find(field);\n        this.meter = this.el.find(meter);\n        this._init();\n    }\n\n    // Meter prototype\n    Meter.prototype = {\n        // Initializes meter\n        _init : function() {\n            this.characters = 0;\n            this.capitalletters = 0;\n            this.lowerletters = 0;\n            this.number = 0;\n            this.special = 0;\n\n            this.upperCase = new RegExp('[A-Z]');\n            this.lowerCase = new RegExp('[a-z]');\n            this.numbers = new RegExp('[0-9]');\n            this.specialchars = new RegExp('([!,%,&,@,#,$,^,*,?,_,~,/])');\n\n            var self = this;\n\n            this.field.on('keyup keydown', function() {\n                self._checkStrength($(this).val());\n            });\n        },\n        // Sets meter percentage\n        _setPercentage : function(percentage) {\n            this.meter.css({ 'width' : percentage + '%' });\n        },\n        // Sets meter class\n        _setClass : function(total) {\n            if(total <= 1) {\n                this.meter.removeClass();\n                this.meter.addClass('veryweak');\n            } else if(total === 2) {\n                this.meter.removeClass();\n                this.meter.addClass('weak');\n            } else if(total === 3) {\n                this.meter.removeClass();\n                this.meter.addClass('medium');\n            } else {\n                this.meter.removeClass();\n                this.meter.addClass('strong');\n            }\n        },\n        // Checks strength\n        _checkStrength : function(value) {\n            if (value.length >= 8) { this.characters = 1; } else { this.characters = 0; }\n            if (value.match(this.upperCase)) { this.capitalletters = 1; } else { this.capitalletters = 0; }\n            if (value.match(this.lowerCase)) { this.lowerletters = 1; }  else { this.lowerletters = 0; }\n            if (value.match(this.numbers)) { this.number = 1; }  else { this.number = 0; }\n            if (value.match(this.specialchars)) { this.special = 1; }  else { this.special = 0; }\n\n\n            var total = this._getTotal();\n            var percentage = this._getPercentage(5, total);\n\n            this._setPercentage(percentage);\n\n            this._setClass(total);\n        },\n        // Percentage helper\n        _getPercentage : function(a, b) {\n            return ((b / a) * 100);\n        },\n        // Gets total\n        _getTotal : function() {\n            return this.characters + this.capitalletters + this.lowerletters + this.number + this.special;\n        }\n    };\n\n    // Register meter to window namespace\n    window.Meter = Meter;\n\n})(window);",";( function(window) {\n    'use strict';\n\n    // Uploader Constructor\n    function Uploader(zone, options) {\n        this._init(zone, options);\n    }\n\n    // Uploader\n    Uploader.prototype = {\n        /**\n         * Constructor\n         *\n         * @param DOM Object\n         * @param array\n         */\n        _init : function(self, options) {\n            this.zone = self;\n\n            var defaults = {\n                selectButton : '#dropzone-select-button',\n                uploadInput : '#dropzone-file',\n                outputList: '#upload-list',\n                enabled: true\n            };\n\n            this.options = $.extend(defaults, options);\n            this.action = $(this.zone).attr('action');\n\n            this.fileQueue = [];\n            this.statusIndicators = [];\n            this.current = 0;\n            this.inProcess = false;\n\n            this.maxsize = this.zone.data('maxsize');\n            window.editRoute = this.zone.data('editroute');\n\n            this._initEvents();\n        },\n        /**\n         * Binds events\n         */\n        _initEvents : function () {\n            var self = this;\n\n            // Class binds\n            this.zone.bind(\"dragenter, dragover\", function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                $(this).addClass('dragenter');\n            });\n\n            this.zone.bind(\"dragleave\", function() {\n                $(this).removeClass('dragenter');\n            });\n\n            // Disable window drop\n            $(window).bind('drop', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n            });\n\n            // Bind file drop\n            this.zone.bind(\"drop\", function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                self._queue(e.originalEvent.dataTransfer.files);\n\n                $(this).removeClass('dragenter');\n            });\n\n            // Bind input change\n            $(this.options.uploadInput).bind(\"change\", function() {\n                self._queue($(this)[0].files);\n            });\n\n            // Bind optional select button if exists\n            if(this.options.selectButton !== false) {\n                $(this.options.selectButton).bind(\"click\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    $(self.options.uploadInput).click();\n                });\n            }\n        },\n        /**\n         * Adds new files to the queue\n         *\n         * @param array\n         */\n        _queue : function(files) {\n            if(!this.options.enabled) { return false; }\n\n            for(var i=0; i < files.length; i++) {\n                if(files[i].size < this.maxsize) {\n\n                    var fd = new FormData();\n                    fd.append('file', files[i]);\n\n                    this.fileQueue.push(fd);\n\n                    // Escape the file name in order to prevent XSS\n                    var indicator = new Indicator(html_entities(files[i].name), files[i].size);\n\n                    this.statusIndicators.push(indicator);\n\n                    if(this.options.outputList !== false) {\n                        $(this.options.outputList).append(indicator.parent);\n                    }\n                }\n            }\n\n            if(this.inProcess === false) {\n                this._upload();\n            }\n        },\n        /**\n         * Iterates through queue and uploads files\n         */\n        _upload : function() {\n            var self = this;\n\n            if(this.current < this.fileQueue.length) {\n                this.inProcess = true;\n\n                var fd = this.fileQueue[this.current],\n                    indicator = this.statusIndicators[this.current];\n\n                $.ajax({\n                    xhr : function() {\n                        var xhrobj = $.ajaxSettings.xhr();\n\n                        if(xhrobj.upload) {\n                            xhrobj.upload.addEventListener('progress', function(e) {\n                                indicator.setProgress(loaded(e));\n                            });\n                        }\n\n                        return xhrobj;\n                    },\n\n                    url : self.action,\n                    type : 'POST',\n                    contentType : false,\n                    processData : false,\n                    cache : false,\n                    data : fd,\n\n                    success : function(data) {\n                        indicator.complete(data);\n                    }\n                })\n                .always(function() {\n                    self.current++;\n                    self._upload();\n                });\n\n            } else {\n                this.inProcess = false;\n            }\n        }\n    };\n\n    window.Uploader = Uploader;\n\n\n    // Indicator Constructor\n    function Indicator(name, size) {\n        this._init(name, size);\n    }\n\n    // Indicator\n    Indicator.prototype = {\n        /**\n         * Constructor\n         *\n         * @param string\n         * @param int\n         */\n        _init : function(name, size) {\n            name = html_entities(name);\n\n            // Parent\n            this.parent = $('<li class=\"material-light\"></li>');\n            // Progress bar\n            this.progressContainer = $('<div class=\"upload-progress-container\"></div>').appendTo(this.parent);\n            this.progressBar = $('<div class=\"upload-progress-bar\"></div>').appendTo(this.progressContainer);\n\n            // Indicator wrapper\n            this.messageWrapper = $('<div class=\"upload-message-wrapper\"></div>').appendTo(this.parent);\n\n            // Icon\n            this.thumbnail = $('<span class=\"upload-thumbnail\"></span>').appendTo(this.messageWrapper);\n            // Container\n            this.container = $('<p></p>').appendTo(this.messageWrapper);\n            // File name\n            this.filename = $('<span class=\"upload-text\">' + name + '</span>').appendTo(this.container);\n            // File size / Message\n            this.message = $('<span class=\"upload-text muted\">' + readable_size(size) + '</span>').appendTo(this.container);\n\n            // Clone filename and message\n            this.container.clone().appendTo(this.progressContainer);\n        },\n        /**\n         * Set the progressbar width\n         *\n         * @param int\n         */\n        setProgress : function(percent) {\n            this.progressBar.width(percent.toString() + \"%\");\n        },\n        /**\n         * Takes action on the completed upload\n         *\n         * @param json\n         */\n        complete : function(reply) {\n            this.setProgress(100);\n\n            if(reply.type === 'success') {\n                this._success(reply.response);\n            } else if(reply.type === 'error') {\n                this._error(reply);\n            }\n        },\n        /**\n         * Makes the UI changes when upload is completed\n         *\n         * @param json string\n         */\n        _success : function(data) {\n            $(this.parent).addClass('complete');\n\n            this.thumbnail.html(data.thumbnail);\n\n            this.message.html(data.mimetype + ' | ' + this.message.text());\n        },\n        /**\n         * Makes the UI changes when upload returns error\n         *\n         * @param json string\n         */\n        _error : function(data) {\n            $(this.parent).addClass('error');\n\n            $(this.thumbnail).html('<i class=\"icon-cancel\"></i>');\n\n            $(this.message).html(data.response);\n        }\n    };\n\n    // Register indicator to the window namespace\n    window.Indicator = Indicator;\n\n}) ( window );\n\nvar Uploader = new Uploader($('#dropzone'));",";( function(window) {\n    'use strict';\n\n    // Constructor\n    function Slug(el) {\n        this.el = el;\n\n        this._init();\n    }\n\n    // Slug prototype\n    Slug.prototype = {\n        // Initialize\n        _init : function() {\n            this.input = this.el.find('input[type=\"text\"]');\n\n            var follow = typeof this.input.data('follows') !== 'undefined' ?\n                this.input.data('follows') :\n                '#title';\n\n            this.follow = $(follow);\n\n            this.dirty = (this.input.val() !== '') ? true : false;\n\n            this._initEvents();\n        },\n        _initEvents : function() {\n            var self = this;\n\n            this.input.on('keyup', function() {\n                self.dirty = true;\n            });\n\n            this.follow.on('keyup', function() {\n                if(!self.dirty) { self._setSlug(); }\n            });\n\n            this.input.on('blur', function() {\n                if(self.input.val() === '') {\n                    self.changed = false;\n                    self._setSlug();\n                }\n            });\n        },\n        // Set slug\n        _setSlug : function() {\n            var slug = this._slugify(this.follow.val());\n\n            this.input.val(slug);\n        },\n        _slugify : function(str) {\n            str = str.replace(/^\\s+|\\s+$/g, '').toLowerCase();\n\n            // Remove accents\n            var from = \"/_,:;\", to = \"aaaaeeeeiiiiioooouuuuncgs------\";\n\n            for(var i = 0, l = from.length; i < l; i++) {\n                str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));\n            }\n\n            return str.replace(/[^a-z0-9 -]/g, '') // Remove invalid chars\n                .replace(/\\s+/g, '-') // Collapse whitespace and replace by -\n                .replace(/-+/g, '-'); // Collapse dashes\n        }\n    };\n\n    window.Slug = Slug;\n\n}) (window);","// General highlighters\n$('.form-group input, .form-group textarea').focus(function () {\n    $(this).closest('.form-group').addClass('focus');\n});\n\n$('.form-group input, .form-group textarea').blur(function () {\n    $(this).closest('.form-group').removeClass('focus');\n});\n\n// Password strength meter\n$('.form-group-password').each(function () {\n    new Meter($(this));\n});\n\n// Slug fields\n$('.form-group-slug').each(function () {\n    new Slug($(this));\n});\n\n// Initialize color pickers\n$('input.minicolors').minicolors();"],"sourceRoot":"/source/"}